{"version":3,"sources":["model.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,yDAAuC;AACvC,iEAAmF;AAEnF,iCAAoC;AAQpC,SAAgB,MAAM,CAAI,OAA0B;IAChD,IAAI,OAAO,CAAC,KAAK,EAAE;QACf,OAAO,UAAC,MAAW;YACf,IAAI,OAAO,CAAC,OAAO,EAAE;gBACjB,+BAAO,CAAC,aAAK,OAAO,CAA0B,CAAC,CAAC,MAAM,CAAC,CAAA;aAC1D;iBAAM;gBACH,IAAI,CAAE,MAAc,CAAC,EAAE,EAAE;oBACpB,MAAc,CAAC,EAAE,GAAG,MAAM,CACvB,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;wBACzC,IAAI,CAAC,GAAG,EAAE,CACb,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;iBAClB;gBAEA,MAAc,CAAC,IAAI,GAAG,EAAE,CAAC;gBAC1B,YAAG,CAAC,cAAK,CAAC,EAAE,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,OAAO,CAAC,EAAE,UAAC,CAAC,EAAE,CAAC;oBACjE,MAAc,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAChC,CAAC,CAAC,CAAC;gBACH,OAAO,CAAC,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE,EAAE,+BAAO,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;aAClF;QACL,CAAC,CAAC;KACL;SAAM;QACH,IAAI,CAAE,OAAe,CAAC,EAAE,EAAE;YACrB,OAAe,CAAC,EAAE,GAAG,MAAM,CACxB,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;gBACzC,IAAI,CAAC,GAAG,EAAE,CACb,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SAClB;QAEA,OAAe,CAAC,IAAI,GAAG,EAAE,CAAC;QAC3B,YAAG,CAAC,cAAK,CAAC,EAAE,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,OAAO,CAAC,EAAE,UAAC,CAAC,EAAE,CAAC;YACpE,OAAe,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC;QACH,+BAAO,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;KAC1C;AACL,CAAC;AAlCD,wBAkCC;AAED;IAA4D,8BAAQ;IAApE;;IAOA,CAAC;IAJG,qCAAqC;IACvB,iBAAM,GAApB,UAAqB,QAA+C;QAChE,OAAU,IAAI,CAAC,EAAE,SAAI,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAG,CAAC;IAC/C,CAAC;IACL,iBAAC;AAAD,CAPA,AAOC,CAP2D,mCAAQ,GAOnE;AAPY,gCAAU","file":"../model.js","sourcesContent":["export * from 'vuex-module-decorators';\nimport { VuexModule as VxModule, Module as VModule } from 'vuex-module-decorators';\nimport { Module as Mod, Store } from 'vuex';\nimport { map, merge } from 'lodash';\nimport { Service } from './service';\nimport { DynamicModuleOptions } from 'vuex-module-decorators/dist/types/moduleoptions';\n\nexport type ServiceClass<V> = (new (...args: any[]) => V & Service) & typeof Service;\n\n// tslint:disable-next-line:ban-types\nexport function Module<S>(options: { [x: string]: any, store: Store<any> }): ClassDecorator;\nexport function Module<S>(options: any & Mod<S, any>): any {\n    if (options.store) {\n        return (module: any) => {\n            if (options.dynamic) {\n                VModule({ ...options } as DynamicModuleOptions)(module)\n            } else {\n                if (!(module as any).id) {\n                    (module as any).id = Number(\n                        Math.random().toString().substring(3, 10) +\n                        Date.now(),\n                    ).toString(36);\n                }\n\n                (module as any).keys = {};\n                map(merge({}, module.actions, module.mutations, module.getters), (o, i) => {\n                    (module as any).keys[i] = i;\n                });\n                options.store.registerModule(module.id, VModule({ namespaced: true })(module));\n            }\n        };\n    } else {\n        if (!(options as any).id) {\n            (options as any).id = Number(\n                Math.random().toString().substring(3, 10) +\n                Date.now(),\n            ).toString(36);\n        }\n\n        (options as any).keys = {};\n        map(merge({}, options.actions, options.mutations, options.getters), (o, i) => {\n            (options as any).keys[i] = i;\n        });\n        VModule({ namespaced: true })(options);\n    }\n}\n\nexport class VuexModule<S = ThisType<any>, R = any> extends VxModule {\n    public static id: string;\n    public static keys: { [x: string]: string };\n    // tslint:disable-next-line:ban-types\n    public static action(callback: (model: any & VuexModule) => Function) {\n        return `${this.id}/${callback(this.keys)}`;\n    }\n}\n"]}